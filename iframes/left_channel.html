<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<form>
	<input type="text" name="text">
	<button type="submit">发送</button>
</form>
</body>
</html>

<script type="text/javascript">
	let port = null, form = document.querySelector('form')
	window.addEventListener('message', function(e){
		port = e.ports[0]
	})
	form.onsubmit = function(){
		let value = document.querySelector("input[type='text']").value
		if (port) {
			port.postMessage(value)
		}
	}
</script>